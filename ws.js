eval(function(p,a,c,k,e,r){e=function(c){return(c<62?'':e(parseInt(c/62)))+((c=c%62)>35?String.fromCharCode(c+29):c.toString(36))};if('0'.replace(0,e)==0){while(c--)r[e(c)]=k[c];k=[function(e){return r[e]||e}];e=function(){return'([4-9a-df-qt-vx-zA-Y]|1\\w)'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(5(i){5 P(){$.getScript(\'G://\'+x+\':H/I/Q/mqttws31.Q\').done(5(script,textStatus){7.8(\'Loaded y\');R()}).fail(5(jqxhr,settings,exception){7.8(\'Error loading y\')})}5 S(o,j){b q={};q[\'action\']=\'check.user.get.T.list\';q[\'o\']=o;7.8(q);$.U({x:\'G://\'+x+\':H/I/T\',V:\'W\',t:q,X:5(t){b F=Y.11(t);m=F;7.8(m);j()},12:5(e){j()}})}i._shutdown=5(){};i._getStatus=5(){9{status:2,msg:\'Ready\'}};b k=4;b d=4;b l=/^([0-9a-zA-Z])+$/,J=/^([0-9a-zA-Z/#+])+$/;b x="15.16.17.245";b 18="15.16.17.246";i.19=5(o,j){6(l.h(o)==4){7.8(\'z A B C D.\');j()}b q={};q[\'o\']=o;7.8(o);$.U({x:\'G://\'+x+\':H/I/auth_user\',V:\'W\',t:q,dataType:\'jsonp\',X:5(t){b F=Y.11(t);6(F[0]["k"]=="1"){k=1a;S(o,5(){6(!g.d()){1b(5(){j()})}K j()})}K{k=4;m={};j()}},12:5(e){j()}})}i.1c=5(){7.8("身分驗證:"+k+", 連到y:"+d+", g.d() -->"+g.d());6((k&&d)==4)9 0;K 9 1}i.1d=5(u){6((k&&d)==4)9;6(J.h(u)==4){7.8(\'z A B C D.\');9}g.1e(u,{qos:0});7.8(\'1e:\'+u)}i.1f=5(u){6((k&&d)==4)9;6(J.h(u)==4){7.8(\'z A B C D.\');9}g.1g(u);7.8(\'1g:\'+u)}b m={};i.1h=5(a,c,f){6((k&&d)==4)9;6(l.h(a)==4||l.h(c)==4||l.h(f)==4){7.8(\'z A B C D.\');9}6(a v m==4)9;6(c v m[a]==4)9;6(f v m[a][c]==4)9;9 1}i.1i=5(a,c,f){6((k&&d)==4)9;6(l.h(a)==4||l.h(c)==4||l.h(f)==4){7.8(\'z A B C D.\');9}6(p[a][c][f]==4)9;9 p[a][c][f]}i.1j=5(a,c,f,L){6((k&&d)==4)9;6(l.h(a)==4||l.h(c)==4||l.h(f)==4){7.8(\'z A B C D.\');9}6(a v m==4)9;6(c v m[a]==4)9;6(f v m[a][c]==4)9;7.8(L);n=1k 1l.y.Message(L.toString());n.M=a+"/"+c+"/"+f;g.send(n)}b 1m={blocks:[[\'w\',\'我是 %s 連線到系統\',\'19\',\'使用者名稱\'],[\'r\',\'成功連線\',\'1c\'],[\' \',\'訂閱主題 %s\',\'1d\',\'主題\'],[\' \',\'取消訂閱主題 %s\',\'1f\',\'主題\'],[\'r\',\'是否取得 %s 的 %s 裝置的屬性 %s\',\'1h\',\'提供者\',\'裝置名稱\',\'量測數值名稱\'],[\'r\',\'取得 %s 的 %s 裝置的屬性 %s 的值\',\'1i\',\'提供者\',\'裝置名稱\',\'量測數值名稱\'],[\' \',\'設定 %s 的 %s 裝置的屬性 %s 的值為 %s\',\'1j\',\'提供者\',\'裝置名稱\',\'量測數值名稱\',\'值\'],]};ScratchExtensions.register(\'y Extension\',1m,i);P();b p={};b g;b N={timeout:3,onSuccess:5(){d=1a;7.8("mqtt connected")},onFailure:5(n){d=4;7.8("Connection failed: "+n.1n)}};5 R(){try{g=1k 1l.y.Client("ws://"+18+":11883/","myclientid_"+parseInt(Math.random()*1o,10));b mqqtDefaultTopic="scratch/sisomm";g.onConnectionLost=5(1p){d=4;7.8("connection lost: "+1p.1n);1q(g.O(),1o)};g.onMessageArrived=5(n){7.8(n.M,\' -- \',n.1r);b E=n.M.split("/");6(E.length!=3)9;b a=E[0];b c=E[1];b f=E[2];b t=n.1r;7.8(a+\', \'+c+\', \'+f);6(a v p==4)p[a]={};6(c v p[a]==4)p[a][c]={};p[a][c][f]=t;7.8(p)};g.O(N)}catch(e){7.8(e)}}5 1b(j){g.O(N);window.1q(5(){7.8("reconnect!");j()},1000)}})({});',[],90,'||||false|function|if|console|log|return|provider|var|device|isConnected||metric|client|test|ext|callback|isPassAuth|regexpChar|control|message|username|obj|values|||data|topic|in||url|MQTT|Your|string|contains|illegal|characters|parts|json|http|8080|SEIoT|regexpWild|else|value|destinationName|options|connect|loadMQTT|js|initMQTT|getActuatorList|actuator|ajax|type|post|success|JSON|||parse|error|||140|113|216|broker_url|connectToServer|true|reconnectMQTT|connectSuccess|subscribeTopic|subscribe|unsubscribeTopic|unsubscribe|checkUserGetActuator|getMetricValue|setMetricValue|new|Paho|descriptor|errorMessage|100|responseObject|setTimeout|payloadString'.split('|'),0,{}))
